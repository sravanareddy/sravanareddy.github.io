<!DOCTYPE html>
<html lang="en">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="http://www.wellesley.edu/sites/default/files/favicon.ico">
<title>Command line basics</title>
<!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="homepage.css" rel="stylesheet">
</head>
<body>

    <div class="container">

      <div class="main">
<h1>  Command line basics</h1>

<h5>Sravana Reddy, 11/15/16
</h5>


<h3>Start</h3>
<p>
  Download <a href="enron.tgz">the Enron corpus</a>.
</p>

<!-- untar? -->

<h3>Structure</h3>
<p>Every command you type has this structure:
<tt><strong>program</strong> argument1 argument2 ...
</tt>
</p>

<p>
Some programs take no arguments, or only one argument.
</p>

<h3>Directory shorthands</h3>
<p>
We will refer to folders as <strong>directories</strong>.
</p>

<tt>
<table class="table table-bordered">
  <tr>
<td>
.
</td>
<td>				the current directory
</td>
</tr>
<tr>
  <td>
..
</td>
<td>				the parent directory
</td>
</tr>
<tr>
  <td>
	~
</td>
<td>			your home directory
</td>
</tr>
<tr>
  <td>
	-
</td>
<td>			the previous directory
</td>
</tr>
<tr>
  <td>
	/
</td>
<td> root directory (no need to go here unless you know what you're doing)
</td>
</tr>
</table>
</tt>

<h3>Navigation</h3>
<p>
The <tt>$</tt> refers to the command prompt; don't type it.
</p>

<tt>
<table class="table table-bordered">
  <tr>
<td>
$	cd dirname
</td>
<td>
  		change working directory to <em>dirname</em>.
      Omitting the argument changes to the home directory by default.
    </td>
  </tr>
  <tr>
<td>
$	cd dirname/subdirname
</td>
<td>
      change working directory to <em>subdirname</em> within <em>dirname</em>
    </td>
  </tr>
<tr>
  <td>
$	pwd
</td>
<td>				show current working directory
</td>
</tr>
  <tr>
    <td>
$	ls dirname
</td>
<td>	list contents of <em>dirname</em>. With multiple arguments,
  it lists the contents of all of them.
  With no argument, it lists the current directory.
</td>
</tr>
<tr>
<tr>
  <td>
$	ls -l [dirname]
</td>
<td>	list contents with details (the letter l, not the number 1)
</td>
</tr>
<tr>
  <tr>
    <td>
  $	ls -1 [dirname]
  </td>
  <td>	list contents in a single column (the  number 1)
  </td>
  </tr>
  <tr>
  <td>
$	ls -ltr [dirname]
</td>
<td>	list contents with details in reverse chronological order
</td>
</tr>
<tr>
  <td>
$	ls -ld dirnames
</td>
<td>	list only the names of the [dirnames] directories, not their contents
</td>
</tr>
<tr>
  <td>
$	mkdir dirname
</td>
<td>	create a new directory called <em>dirname</em> in the current working directory
</td>
</tr>
</table>
</tt>

<h3>File Reading</h3>
<tt>
<table class="table table-bordered">
<tr>
  <td>
    $	less filename
  </td>
  <td>
    Preview the file named <em>filename</em>. Type <em>q</em> to end.
</td>
</tr>

<tr>
    <td>$	more filename		</td>
    <td>		Same as above, fewer features</td>
  </tr>
  <tr>
    <td>
    $	head filename	</td>
    <td>			Show the first 10 lines of <em>filename</em> </td>
  </tr>
  <tr>
    <td>
    $	head -n20 filename</td>
    <td>			Show the first 20 lines </td>
  </tr>
  <tr>
    <td>
    $	tail filename
  </td>
  <td>		Show the last 10 lines </td>
</tr>

<tr>
  <td>
    $	cat filename </td>
    <td>	Show all the contents
</td>
</tr>
<tr>
  <td>
    $	wc filename </td>
    <td>	Count the number of lines, words, and characters in <em>filename</em>
</td>
</tr>

</tr>
<tr>
  <td>
    $	wc -l filename </td>
    <td>	Count the number of lines in <em>filename</em>. Use -c for characters, -w for words.
</td>
</tr>

<tr>
  <td>
    $	open filename -a textedit</td>
    <td>	Open <em>filename</em> with textedit (for example)
</td>
</tr>

</table>
</tt>

<h3>Wildcards</h3>
<p>
The asterisk * matches any number of any character.
</p>

<tt>
<table class="table table-bordered">
  <tr>
<td>
$	ls w*
</td>
<td>		lists all items whose names start with w
</tr>
<tr>
<td>
$	cat 2*
</td>
<td>		show the contents of all files starting with 2
</tr>
</table>
</tt>

<h3><span class="label label-danger">Exercise</span></h3>
<ul>
  <li>List the contents of all directories starting with <tt>mc</tt>
    <a class="btn" data-toggle="collapse" data-target="#ex1">answer &raquo;</a><br>
       <p class="collapse bg-success" id="ex1"><tt>$ ls mc*       </tt>
       </p>

  <li>List only the names of all directories ending with <tt>j</tt>
    <a class="btn" data-toggle="collapse" data-target="#ex2">answer &raquo;</a><br>
       <p class="collapse bg-success" id="ex2"><tt>$ ls -d *k</tt>
       </p>

    <li>
Go inside <tt>mckay-j</tt>'s <tt>deleted_items</tt> directory, preview message
37., show the last 5 lines of message 20.
and go back inside the <tt>enron</tt> folder.
  <a class="btn" data-toggle="collapse" data-target="#ex3">answer &raquo;</a><br>
     <p class="collapse bg-success" id="ex3">
       <tt>$ cd mckay-j/deleted_items</tt><br>
<tt>$ less 37.</tt><br>
<tt>$ tail -n5 20.</tt><br>
<tt>$ cd -</tt>

</p>

<li>List the files with names containing <tt>4</tt> in everyone's <tt>inbox</tt>
  <a class="btn" data-toggle="collapse" data-target="#ex4">answer &raquo;</a><br>
     <p class="collapse bg-success" id="ex4">
       <tt>$ ls */inbox/*4*</tt>
     </p>

<li>Get the number of words in the files of people whose last names are <tt>mckay</tt>
       <a class="btn" data-toggle="collapse" data-target="#ex5">answer &raquo;</a><br>
          <p class="collapse bg-success" id="ex5">
            <tt>$ wc -w mckay*/*/*.</tt>
          </p>
</ul>

<h3>Piping and redirecting</h3>
<p>
  Multiple commands can be chained together using the <tt>|</tt> (pipe) symbol.
  The input to the command on the right is the output of the command on the left.
What do the following chained commands do?
</p>

<tt>
<table class="table table-bordered">
  <tr>
<td>
$ ls -l | wc -l <br>
$ ls -l mckay*/*/*. | more <br>
</td>
</tr>
</table>
</tt>

<p>
We can redirect the output of any command from the console to a file
using <tt>&gt;</tt>.
</p>

<tt>
<table class="table table-bordered">
  <tr>
<td>
  $ ls -1 > enronpeople.txt<br>
  $ more enronpeople.txt <br>
  $ cat reitmeyer-j/*/* > reitmeyer_all.txt
</td>
</tr>
</table>
</tt>

<h3><span class="label label-danger">Exercise</span></h3>
<ul>
  <li>Go into <tt>reitmeyer-j</tt>'s <tt>inbox</tt> and write the
    last line of every e-mail to a filename named "endings.txt" in the <tt>enron</tt> directory.
    <a class="btn" data-toggle="collapse" data-target="#ex6">answer &raquo;</a><br>
       <p class="collapse bg-success" id="ex6">
         <tt>$ cd reitmeyer-j/inbox      <br>
        $ tail -n1 *. > ../../endings.txt <br>
        $ cd ../..</tt>
       </p>
</ul>

<h3>File moving and copying</h3>

<tt>
<table class="table table-bordered">
  <tr>
<td>
$	cp source dest	</td>
<td>	Copy the file in source to dest</td>
</tr>
<tr>
  <td>
$	cp -R source dest
</td>
<td>	Copying when source is a directory</td>
</tr>
<tr>
  <td>
$	mv source dest
</td>
<td>	Move the file in source to dest (also used for renaming files)
</td>
</tr>
<tr>
  <td>
$	rm filename
</td>
<td>
  Permanently delete filename (careful!)
</td>
</tr>
<td>
$	rm -r dirname
</td>
<td>		Permanently delete dirname and all its contents
</td>
</tr>
<tr>
  <td>
$	ln -s source [dest]
</td>
<td>	Make a symbolic link from source to dest
</td>
</tr>
</table>
</tt>

<h3><span class="label label-danger">Exercise</span></h3>
<ul>
  <li>Remove all directories starting with <tt>rei</tt>.
    <a class="btn" data-toggle="collapse" data-target="#ex7">answer &raquo;</a><br>
       <p class="collapse bg-success" id="ex7">
         <tt>$ rm -r rei*     </tt>
       </p>
  <li>Move all items that end in <tt>1</tt>
    in <tt>mckay-j</tt>'s <tt>quotes</tt> directory
    to their <tt>inbox</tt>
    <a class="btn" data-toggle="collapse" data-target="#ex8">answer &raquo;</a><br>
       <p class="collapse bg-success" id="ex8">
         <tt>$ mv mckay-j/quotes/*1. mckay-j/inbox   </tt>
       </p>
</ul>

<h3>Permissions</h3>
<p>
<tt>ls -1</tt> shows you detailed information about each file or directory:
the size, date modified, the owner, the group, and permissions.
</p>

<p>
Permissions are denoted by a sequence of 10 bits, like this: <tt>-rw-rw----</tt>
</p>

<p>
The first bit shows the type of item
(file = <strong>-</strong>,  directory = <strong>d</strong>, link = <strong>l</strong>).
The next three show which permissions the owner of the file has:
read, write, execute.
Typically, the owner should have full permission to read and write
(unless you don’t trust yourself).
Execute permissions should only be for programs.
</p>

<p>
The next three bits show the permissions that anyone in the group has,
and the last three are the permissions for all other users.
</p>

<p>
Permissions can only be changed by the owner of the file using <tt>chmod</tt>.
Examples:
</p>

<tt>
<table class="table table-bordered">
  <tr>
<td>
$	chmod u-w name</td>
<td>			Removes write permission for the owner (user)
  </td>
</tr>
<tr>
<td>$	chmod ug+w name  </td>
<td>			Adds write permission for the group and the owner</td>
</tr>
<tr>
  <td>
$	chmod -R o+r name
</td>
<td>			Recursively adds read permission for all other users on the <em>name</em> directory and all its contents
</td>
</tr>
</table>
</tt>

<h3><span class="label label-danger">Exercise</span></h3>
<ul>
  <li>Make <tt>baughman-d</tt>'s <tt>inbox</tt> and all its files readable
    only by the owner.
    <a class="btn" data-toggle="collapse" data-target="#ex9">answer &raquo;</a><br>
       <p class="collapse bg-success" id="ex9">
         <tt>$ chmod og-r baughman-d/inbox   </tt>
       </p>
</ul>

<h3>Pattern Finding with Regular Expressions</h3>

<p>
<tt>grep pattern filenames</tt> searches for patterns in the contents of the file.
</p>

<tt>
<table class="table table-bordered">
  <tr>
<td>
$	grep word filename	</td>
<td>	Display all lines in filename containing the string "word"</td>
</tr>
</table>
</tt>

<p>
Try these out and figure out what they do.
</p>

<tt>
  <table class="table table-bordered">
    <tr>
  <td>
    $ grep money shackleton-s/inbox/*.
  </td>
</tr>
  <tr>
  <td>
    $ grep \\$ shackleton-s/inbox/*.
  </td>
</tr>
  <tr>
  <td>
    $ grep -o money shackleton-s/inbox/*.
  </td>
</tr>
  <tr>
  <td>
    $ grep -h money shackleton-s/inbox/*. | grep -v \\$
  </td>
</tr>
</table>
</tt>

<p>Besides searching for strings, you can search for
  patterns specified by regular expressions.
Some commonly used symbols in grep searches:
</p>


<tt>
  <table class="table table-bordered">
    <tr>  <td>	^		</td><td>	Start of line </td></tr>
<tr>  <td>$		</td><td>	End of line</td></tr>
<tr>  <td>.		</td><td>	Any single character</td></tr>
<tr>  <td>* 	</td><td>		Any number of occurrences (incl 0) of the previous character. d* matches any number of d</td></tr>
<tr>  <td>\+	</td><td>		At least one occurrence of the previous character</td></tr>
<tr>  <td>\?	</td><td>		Zero or one occurrences of the previous character</td></tr>
<tr>  <td>\	</td><td>		Escaping special characters (like * or .)</td></tr>
<tr>  <td>	[0-9] or \d	</td><td>	Any digit</td></tr>
<tr>  <td>[a-z]	</td><td>	Any lowercase letter</td></tr>
<tr>  <td>[A-Z]	</td><td>	Any uppercase letter</td></tr>
<tr>  <td>[aeiou]	</td><td>	Any lowercase vowel</td></tr>
<tr>  <td>\W	</td><td>	Any whitespace (spaces, newlines, etc)</td></tr>
<tr>  <td>\w	</td><td>	Any non-whitespace</td></tr>
</table>
</tt>

<h3>Bash Scripting</h3>
<p>
Bash is a programming language mainly used for simple batch operations on files.
$ is used to reference variables after they’ve been declared.
</p>

<p>
Here's how to go inside each of <tt>mckay-b</tt>'s directories, print its name,
search for line containing e-mail addresses in its files,
and write the results to a file named <tt>search.txt</tt>.
</p>

<tt>
for dirname in */; do cd $dirname; echo $dirname; grep "@.*\." *. >> ../../results.txt; cd ..; done
</tt>

<p>
We can save these bash programs to a file, typically with a <tt>.sh</tt> extension.
Larger bash programs are better written in a file than on the command line directly.
</p>

<h3>Communications</h3>

<tt>
  <table class="table table-bordered">
    <tr>
  <td>
$	wget http:url	</td><td>	Download the file located at url</td>
</tr>
<tr>
<td>
$	ssh remoteserver</td><td>	Logon to a remote machine</td></tr>
<tr>
<td>
$	scp source dest	</td><td>
  Transfer (copy) a file located at source to dest, where source or dest are remote machines
</td>
</tr>
</table>
</tt>

<h3>More reading:</h3>

<ul>
  <li><a href="http://cs.wellesley.edu/~webdb/unix.html">Scott's excellent tutorial</a>
<li><a href="https://twitter.com/climagic">CLI Magic (advanced)</a>
</ul>

</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="bootstrap/js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>
